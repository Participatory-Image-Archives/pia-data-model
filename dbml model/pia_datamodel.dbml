// dbml documentation: https://www.dbml.org/
// produce docs from dbml files: https://dbdocs.io/

// Brunner, Kreis - Image-centered
Table Image {
  id int [pk, increment]
  salsah_id int
  oldnr varchar
  collection int [ref: > Collection.id]
  signature varchar
  title varchar
  original_title varchar
  date varchar
  daterange_start varchar
  daterange_end varchar
  exact_date date
  exact_time time
  sequence_number varchar
  
  comment int [ref: - Comment.id]
  geography int [ref: > Geography.id]
  objecttype int [ref: > ObjectType.id]
  model int [ref: > Model.id]
  format int [ref: > Format.id]
}

Table Keyword {
  id int [pk, increment]
  label varchar
  comment varchar
  origin varchar
  aat_id int
  aat_url varchar
}

Table Images_Keywords {
  image_id int [ref: > Image.id]
  keyword_id int [ref: > Keyword.id]
}

Table Comment {
  id int [pk, increment]
  comment text
}

Table Geography {
  id int [pk, increment]
  label varchar
  geonames_id int
  geonames_url varchar
  latitude float
  longitude float
}

Table ObjectType {
  id int [pk, increment]
  label varchar
  comment varchar
  aat_id int
  aat_url varchar
}

Table Model {
  id int [pk, increment]
  label varchar
  comment varchar
  aat_id int
  aat_url varchar
}

Table Format {
  id int [pk, increment]
  label varchar
  comment varchar
}


Table Person {
  id int [pk, increment]
  name varchar
  gnd_id int
  gnd_url varchar
  birthplace int [ref: > Geography.id]
  deathplace int [ref: > Geography.id]
  job_title varchar
  description text
}

Table Images_Content {
  image_id int [ref: > Image.id]
  person_id int [ref: > Person.id]
}

Table Images_People {
  image_id int [ref: > Image.id]
  person_id int [ref: > Person.id]
}

Table Images_Copyright {
  image_id int [ref: > Image.id]
  person_id int [ref: > Person.id]
}

// Collections
Table Collection {
  id int [pk, increment]

  Note: 'Brunner, Kreis, Atlas, etc'
}
Table Album {
  id int [pk, increment]
  collection int [ref: - Collection.id]
  description text
  comment varchar
  signature varchar

  Note: 'Right now not defined, if representing physical or virtual album'
}
Table Images_Album {
  image_id int [ref: > Image.id]
  album_id int [ref: > Album.id]
}

// Document and Context Objects
// Notes, Protocols, etc
Table Document {
  id int [pk, increment]
  object_type int [ref: > ObjectType.id]
  model int [ref: > Model.id]
  format int [ref: > Format.id]
}

// Map based Model (comming from Atlas)
Table Map {
  id int [pk, increment]
}

Table MapEntry {
  id int [pk, increment]
  map int [ref: > Map.id]
  map_geography int [ref: - MapGeography.id]
  map_legend_entry int [ref: - MapLegendEntry.id]
}

Table MapGeography {
  id int [pk, increment]
  geography int [ref: - Geography.id]
}

Table MapLegend {
  id int [pk, increment]
}

Table MapLegendEntry {
  id int [pk, increment]
}

Table MapLegend_MapLegendEntries {
  map_legend_entry_id int [ref: > MapLegendEntry.id]
  map_legend_id int [ref: - MapLegend.id]
}